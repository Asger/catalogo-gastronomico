<ng-container *ngIf="cargado; else loading">
  <div class="container mt-tabla">
    <p-toast position="bottom-center"></p-toast>
    <p-toolbar styleClass="mt-5 mb-2">
      <ng-template pTemplate="left">
        <button
          pButton
          pRipple
          label="Agregar un slider"
          icon="pi pi-plus"
          class="p-button-info mr-2"
          routerLink="/admin/nueva-noticia"
        ></button>
      </ng-template>
    </p-toolbar>
    <p-table
      #dt
      [value]="carrusel"
      [rows]="5"
      [paginator]="true"
      [globalFilterFields]="['titulo']"
      [rowHover]="true"
      dataKey="id"
      currentPageReportTemplate="Mostrando {first} a {last}, de {totalRecords} sliders"
      [showCurrentPageReport]="true"
    >
      <ng-template pTemplate="caption">
        <div class="flex justify-content-between">
          <h3 class="m-0 hidden md:flex pt-2">Gestión del Carrusel</h3>
          <span class="p-input-icon-left">
            <i class="pi pi-search"></i>
            <input
              pInputText
              type="text"
              (input)="dt.filterGlobal($any($event.target).value, 'contains')"
              placeholder="Buscar..."
            />
          </span>
        </div>
      </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="titulo">
            Título <p-sortIcon field="titulo"></p-sortIcon>
          </th>
          <th>Imagen</th>
          <th></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-slider>
        <tr>
          <td>{{ slider.titulo }}</td>
          <td>
            <img [src]="slider.imagen" [alt]="slider.titulo" />
          </td>
          <td>
            <button
              pButton
              pRipple
              icon="pi pi-pencil"
              class="p-button-rounded p-button-info mr-3"
              [routerLink]="['/admin/editar-noticia', slider.id]"
            ></button>
            <button
              pButton
              pRipple
              icon="pi pi-trash"
              class="p-button-rounded p-button-danger"
              (click)="deleteSlider(slider)"
            ></button>
          </td>
        </tr>
      </ng-template>
    </p-table>
    <p-confirmDialog [style]="{ width: '650px' }"></p-confirmDialog>
  </div>
</ng-container>

<ng-template #loading>
  <p-progressSpinner
    class="flex justify-content-center my-5"
    strokeWidth="4"
  ></p-progressSpinner>
</ng-template>
